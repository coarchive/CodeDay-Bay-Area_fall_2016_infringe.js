!function e(t,a,r){function o(i,s){if(!a[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(n)return n(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return o(a?a:e)},c,c.exports,e,t,a,r)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),n=r(o),i=e("./states/game"),s=r(i),l=e("./states/gameover"),u=r(l),c=e("./states/menu"),f=r(c),h=e("./states/preloader"),p=r(h),d=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"infringe.js-game");d.state.add("boot",new n.default),d.state.add("game",new s.default),d.state.add("gameover",new u.default),d.state.add("menu",new f.default),d.state.add("preloader",new p.default),d.state.start("boot")},{"./states/boot":3,"./states/game":4,"./states/gameover":5,"./states/menu":6,"./states/preloader":7}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={};r.default={map:["aabs","saba"],mapParsed:[],entitys:["0,0,texture1","10,10,texture2"],textureMap:{a:"texture3",b:"texture4",s:"texture0"},music:"room.music",next:"next room"},r.Bed={map:["ccccc","btllp","ccccc"],mapParsed:[],textureMap:{t:"bed_head_top",b:"bed_feet_top",c:"wool_colored_cyan",l:"brick",p:"portal"},music:"",next:"Lab"};var o=function(e){if(!e.mapParsed.length)for(var t in e.map){e.mapParsed[t]=[];for(var a in e.map[t])e.mapParsed[t].push(e.textureMap[e.map[t][a]])}return e.mapParsed},n={parse:o,rooms:r};a.default=n},{}],3:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),i(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={room:"Bed"}}}]),t}(Phaser.State);a.default=s},{}],4:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=e("../rooms.js"),u=r(l),c=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),s(t,[{key:"create",value:function(){this.walls=this.add.group(null,"walls",!1,!0,Phaser.Physics.ARCADE),this.renderRoom(),this.add.audio("lab").play();var e=this.player=this.game.global.player=this.add.sprite(0,0,"person");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5,.5),e.body.collideWorldBounds=!0,e.poweredUp=!1,this.add.button(this.game.width-40,10,"Pause",this.pauseGame,this),this.keys=this.game.input.keyboard.addKeys({up:Phaser.KeyCode.W,down:Phaser.KeyCode.S,left:Phaser.KeyCode.A,right:Phaser.KeyCode.D,firemissle:Phaser.KeyCode.SPACEBAR});var t=this.add.weapon(10,"bullet");t.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,t.bulletSpeed=600,t.fireRate=1,t.trackSprite(e,0,0,!0),this.game.input.onDown.add(function(){e.poweredUp||t.fire()}),this.enemies=this.add.group(null,"enemies",!1,!0,Phaser.Physics.ARCADE)}},{key:"update",value:function(){this.player.rotation=this.game.physics.arcade.angleToPointer(this.player),this.keys.up.isDown?this.player.body.velocity.y=-143:this.keys.down.isDown?this.player.body.velocity.y=143:this.player.body.velocity.y=0,this.keys.left.isDown?this.player.body.velocity.x=-143:this.keys.right.isDown?this.player.body.velocity.x=143:this.player.body.velocity.x=0,this.keys.firemissle.isDown&&this.fireMissle(),this.game.physics.arcade.intersects(this.player.body,this.portal.body)&&this.advance()}},{key:"pauseGame",value:function(){this.game.paused=!0}},{key:"fireMissle",value:function(){if(!this.missle){var e=this.add.sprite(this.player.x,this.player.y,"missile");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.rotation=this.player.rotation,e.body.velocity=this.game.physics.arcade.velocityFromAngle(e.rotation,300),e.animations.add("go"),e.animations.play("go",10,!0),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,this.missle=!0,e.events.onKilled.add(function(){this.missle=!1},this)}}},{key:"createPortal",value:function(e,t){var a=this.portal=this.add.sprite(e,t,"portal");this.game.physics.enable(a,Phaser.Physics.ARCADE),a.animations.add("default"),a.animations.play("default",15,!0)}},{key:"endGame",value:function(){this.game.state.start("gameover")}},{key:"paused",value:function(){this.pausedText=this.add.text(.5*this.game.width,.25*this.game.height,"Paused"),this.pausedText.anchor.set(.5),this.game.input.onDown.addOnce(this.resumeGame,this)}},{key:"resumed",value:function(){this.pausedText.destroy()}},{key:"resumeGame",value:function(){this.game.paused=!1}},{key:"renderRoom",value:function(){var e,t,a;for(a=this.room=u.default.rooms[this.game.global.room],u.default.parse(a),t=0;t<a.mapParsed.length;t++){for(e=0;e<a.mapParsed[t].length;e++)"portal"===a.mapParsed[t][e]?this.createPortal(32*e,32*t):this.add.image(32*e,32*t,a.mapParsed[t][e]);var r=this.walls.create(32*e,32*t);r.body.immovable=!0,r.collideWorldBounds=!0,r.allowGravity=!1}this.game.world.setBounds(0,0,32*e,32*t)}},{key:"advance",value:function(){this.player.x=0,this.player.y=0,this.game.global.room=this.room.next,this.renderRoom()}}]),t}(Phaser.State);a.default=c},{"../rooms.js":2}],5:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),i(t,[{key:"create",value:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"Gameover",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.saveVarsToLocalStorage(),this.input.onDown.add(this.restartGame,this)}},{key:"saveVarsToLocalStorage",value:function(){}},{key:"resetGlobalVariables",value:function(){}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.resetGlobalVariables(),this.game.state.start("menu")}}]),t}(Phaser.State);a.default=s},{}],6:[function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),i(t,[{key:"create",value:function(){this.add.text(.5*this.game.width,.25*this.game.height,"Infringe",{font:"42px Arial",fill:"#ffffff",align:"center"}).anchor.set(.5),this.add.button(.5*this.game.width,.5*this.game.height,"play",this.startGame,this).anchor.set(.5)}},{key:"update",value:function(){}},{key:"startGame",value:function(){this.game.state.start("game")}}]),t}(Phaser.State);a.default=s},{}],7:[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=e("../rooms.js"),u=r(l),c=function(e){function t(){o(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return i(t,e),s(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"update",value:function(){this.ready&&this.game.state.start("menu")}},{key:"loadResources",value:function(){this.game.load.baseURL=window.location,this.game.load.path="assets/",this.game.load.image("bullet","bullett orange.png"),this.game.load.audio("lab","Lab Room.wav"),this.game.load.images(["play","Pause","person","pwrblt","snow"]),this.game.load.images(this.generateImages()),this.game.load.spritesheet("missile",null,63,22.25,4),this.game.load.spritesheet("portal",null,32,32)}},{key:"onLoadComplete",value:function(){this.ready=!0}},{key:"generateImages",value:function(){var e=[];return Object.keys(u.default.rooms).filter(function(e){return"default"!==e}).map(function(e){return u.default.rooms[e]}).map(function(e){return Object.keys(e.textureMap).map(function(t){return e.textureMap[t]}).filter(function(e){return"portal"!==e})}).forEach(function(t){t.forEach(function(t){e.push(t)})}),e}}]),t}(Phaser.State);a.default=c},{"../rooms.js":2}]},{},[1]);

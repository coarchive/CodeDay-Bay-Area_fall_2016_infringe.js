!function e(t,s,a){function o(n,r){if(!s[n]){if(!t[n]){var l="function"==typeof require&&require;if(!r&&l)return l(n,!0);if(i)return i(n,!0);var w=new Error("Cannot find module '"+n+"'");throw w.code="MODULE_NOT_FOUND",w}var u=s[n]={exports:{}};t[n][0].call(u.exports,function(e){var s=t[n][1][e];return o(s?s:e)},u,u.exports,e,t,s,a)}return s[n].exports}for(var i="function"==typeof require&&require,n=0;n<a.length;n++)o(a[n]);return o}({1:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),i=a(o),n=e("./states/game"),r=a(n),l=e("./states/gameover"),w=a(l),u=e("./states/menu"),c=a(u),h=e("./states/preloader"),d=a(h),p=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"infringe.js-game");p.state.add("boot",new i.default),p.state.add("game",new r.default),p.state.add("gameover",new w.default),p.state.add("menu",new c.default),p.state.add("preloader",new d.default),p.state.start("boot")},{"./states/boot":4,"./states/game":5,"./states/gameover":6,"./states/menu":7,"./states/preloader":8}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={};a.default={map:["aabs","saba"],mapParsed:[],entitys:["0,0,enemy/texture1","10,10,friend/texture2"],textureMap:{a:"texture3",b:"texture4",s:"texture0"},music:"room.music",next:"next room"},a.Bed={map:["wwwwwwwwww","ccccccwwww","cbtccclllp","ccccccwwww","wwwwwwwwww"],mapParsed:[],textureMap:{t:"bed_head_top",b:"bed_feet_top",c:"wool_colored_cyan",l:"brick",p:"portal",w:"planks_big_oak"},music:"Bed.wav",next:"Lab",text:"You are the brilliant Dr. Syphla. You have been ordered to test the new wormhole device. You were also told to be ready for anything, hence the gun.",parsedEnts:[]},a.Lab={map:["wwwwwwwwwwwwwwwwww   ooooooooooooooooo      jjppwwwwwwwwwwwwwwwwwwww","wwwwwwwwwwwwwwwwww   oxxxxxxxxxxxxxxxo      jjpwwwwwwwwdwwwwwwwwwwww","wwwwwwwlllwwwwwwwwssscxxxxxxxxxxxxxxxo      ppwwwwwwwggdggwwwwwwwwww","wwwwwwwlilwwwwwwwwssscxxxxxxxxxxxooooo      wwwwwwwwwgeeegwwwwwwwwww","wwwwwwwlllwwwwwwww   occccccccccoo      f   wwwwwwwwddebeddwwwwwwwww","wwwwwwwwwwwwwwwwww   ooooooossoooo    f     wwwwwwwwwgeeegwwwwwwwwww","                ss          ss              wwwwwwwwwggdggwwwwwwwwww","                sssssssssssssssssssssssssssswwwwwwwwwwwdwwwwwwwwwwww","                sssssssssssssssssssssssssssswwwwwwwwwwwwwwwwwwwwwwww"],mapParsed:[],textureMap:{w:"planks_jungle",o:"iron_block",x:"cobblestone",c:"Caution",f:"cactus_top",s:"stonebrick_cracked",j:"sponge_wet",l:"brick",p:"sponge",i:"cauldron_inner",b:"activate",d:"diamond_block",g:"gold_block",e:"emerald_block"},music:"Lab Room.wav",next:"Outside",walls:["8,3","21,0","21,1","21,2","21,3","21,4","21,5","22,5","23,5","24,5","25,5","26,5","27,5","30,5"],text:"This is your lab, where you make the most important discoveries. Go through the hallway to test it out.",onButtonPress:function(){this.advance()},parsedEnts:[]},a.Outside={map:["sssssssssssssssssss","sssIssssssssssssscs","sssssssssssssssssss","ssssssssiiiiIssssss                                ddd","sssssssiIsisissssss                                dpd","scsssssiIiIisssssss                  wwwwwwwwww    ddd","ssssssssiiisscsssss                  wwwwwwwwww","sssscssssssssscssss                  wwwwwwwwww","sssssssssssssssssss                  wwwwwwwwww","        aac                          wwwwwwwwww","        aaa                          wwwwwwwwww","        caa                          wwwwwwwwww","        acagacc                      wwwwwwwwww","       caaIacagaagcacgacacacagccaccacwwwwwwwwww","        aacg iicascccacaigcacacIgacacwwwwwwwwww"],mapParsed:[],textureMap:{w:"planks_birch",s:"snow",a:"stone_andesite",c:"cobblestone",g:"gravel",I:"ice_packed",i:"ice",d:"diamond_block"},music:"Dumdum.wav",next:"a",text:"Wha? What should have been a controlled experiment somehow got you in the middle of a barren tundra, even though you live in florida",entitys:["100,100,enemies/Zombie","150,100,enemies/Zombie","200,100,enemies/Zombie","100,150"],parsedEnts:[]};var o=function(e){if(!e.mapParsed.length)for(var t in e.map){e.mapParsed[t]=[];for(var s in e.map[t])e.mapParsed[t].push(e.textureMap[e.map[t][s]])}return e.mapParsed},i=function(e){!e.parsedEnts.length&&e.entitys&&(e.parsedEnts=e.entitys.map(function(e){var t=e.split(",");return{x:t[0],y:t[1],type:{group:t[2].split("/")[0],texture:t[2].split("/")[1]}}}))},n={parse:function(e){o(e),i(e)},rooms:a};s.default=n},{}],3:[function(e,t,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),i=function(){function e(t){a(this,e),this.game=t,this._cursong=null}return o(e,[{key:"play",value:function(e){this._cursong&&(this._cursong.stop(),this._cursong.destroy()),this._cursong=this.game.add.audio(e),this._cursong.play(null,null,null,!0,!0),this._cursong.mute=!1,this._cursong.volume=1}}]),e}();s.default=i},{}],4:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=e("../songs.js"),w=a(l),u=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),r(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={room:"Bed",songManager:new w.default(this.game)}}}]),t}(Phaser.State);s.default=u},{"../songs.js":3}],5:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=e("../rooms.js"),w=a(l),u=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),r(t,[{key:"create",value:function(){this.walls=this.add.group(null,"walls",!1,!0,Phaser.Physics.ARCADE),this.imgs=[],this.renderRoom();var e=this.player=this.game.global.player=this.add.sprite(0,0,"person");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5,.5),e.body.collideWorldBounds=!0,e.data.poweredUp=!1,this.add.button(this.game.width-40,10,"Pause",this.pauseGame,this),this.keys=this.game.input.keyboard.addKeys({up:Phaser.KeyCode.W,down:Phaser.KeyCode.S,left:Phaser.KeyCode.A,right:Phaser.KeyCode.D,firemissle:Phaser.KeyCode.SPACEBAR});var t=this.add.weapon(10,"bullet");t.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,t.bulletSpeed=600,t.fireRate=1,t.trackSprite(e,0,0,!0),this.weapon=t,this.game.input.onDown.add(function(){e.data.poweredUp||t.fire()}),this.enemies=this.add.group(null,"enemies",!1,!0,Phaser.Physics.ARCADE),this.game.camera.follow(e),e.events.onKilled.add(this.endGame,this),e.health=e.maxHealth=100}},{key:"update",value:function(){this.player.rotation=this.game.physics.arcade.angleToPointer(this.player),this.keys.up.isDown?this.player.body.velocity.y=-143:this.keys.down.isDown?this.player.body.velocity.y=143:this.player.body.velocity.y=0,this.keys.left.isDown?this.player.body.velocity.x=-143:this.keys.right.isDown?this.player.body.velocity.x=143:this.player.body.velocity.x=0,this.keys.firemissle.isDown&&this.fireMissle(),this.portal.body&&this.game.physics.arcade.intersects(this.player.body,this.portal.body)&&this.advance(),this.game.physics.arcade.overlap(this.player,this.enemies)&&this.player.damage(1),this.enemies.forEachAlive(function(e){e.data.update()}),this.game.physics.arcade.collide(this.player,this.walls),this.game.physics.arcade.collide(this.walls,this.missile,function(e){console.log("Collide!"),e.kill()}),this.game.physics.arcade.collide(this.weapon.bullets,this.walls,function(e){e.kill()}),this.game.physics.arcade.collide(this.weapon.bullets,this.enemies,function(e,t){e.kill(),t.damage(27)}),this.game.physics.arcade.collide(this.enemies,this.missile,function(e,t){e.kill(),t.damage(41)}),this.player.bringToTop()}},{key:"pauseGame",value:function(){this.game.paused=!0}},{key:"fireMissle",value:function(){if(!this.missile){var e=this.add.sprite(this.player.x,this.player.y,"missile");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5),e.rotation=this.player.rotation,this.game.physics.arcade.velocityFromRotation(e.rotation,300,e.body.velocity),e.animations.add("go"),e.animations.play("go",10,!0),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,this.missile=e,e.events.onKilled.add(function(){this.missile=!1},this)}}},{key:"createPortal",value:function(e,t){var s=this.portal=this.add.sprite(e,t,"portal");return this.game.physics.enable(s,Phaser.Physics.ARCADE),s.animations.add("default"),s.animations.play("default",15,!0),s}},{key:"endGame",value:function(){this.game.state.start("gameover")}},{key:"paused",value:function(){this.pausedText=this.add.text(.5*this.game.width,.25*this.game.height,"Paused"),this.pausedText.anchor.set(.5),this.game.input.onDown.addOnce(this.resumeGame,this)}},{key:"resumed",value:function(){this.pausedText.destroy()}},{key:"resumeGame",value:function(){this.game.paused=!1}},{key:"renderRoom",value:function(){var e,t,s;for(this.imgs.text&&this.imgs.text.destroy(),this.imgs.length&&(this.imgs.forEach(function(e){e.destroy()}),this.imgs=[]),this.walls.removeAll(!0),s=this.room=w.default.rooms[this.game.global.room],w.default.parse(s),document.title=this.game.global.room+" Room - Infringe",this.game.global.songManager.play(s.music.replace(".wav","")),t=0;t<s.mapParsed.length;t++)for(e=0;e<s.mapParsed[t].length;e++)"portal"===s.mapParsed[t][e]?this.imgs.push(this.createPortal(32*e,32*t)):void 0===s.mapParsed[t][e]?this.createWall(32*e,32*t):"activate"===s.mapParsed[t][e]?this.imgs.push(this.add.button(32*e,32*t,"activate",s.onButtonPress,this)):this.imgs.push(this.add.image(32*e,32*t,s.mapParsed[t][e])),this.imgs[this.imgs.length-1].sendToBack();if(s.walls)for(var a=0;a<s.walls.length;a++)this.createWall(32*+s.walls[a].split(",")[0],32*+s.walls[a].split(",")[1]);this.imgs.text=this.add.text(32,32*t+64,this.wordWrap(s.text,50),{fill:"#FFFFFF",fontSize:"20px"}),this.game.world.setBounds(0,0,32*e,32*t),s.parsedEnts.length&&s.parsedEnts.forEach(this.createEntity,this)}},{key:"advance",value:function(){this.player.x=0,this.player.y=0,this.game.global.room=this.room.next,this.renderRoom()}},{key:"createWall",value:function(e,t){var s=this.walls.create(e,t);s.body.immovable=!0,s.collideWorldBounds=!0,s.allowGravity=!1,s.bringToTop(),s.z=this.player.z}},{key:"wordWrap",value:function(e,t){var s="\n",a=!1,o="";do{for(var i=!1,n=t-1;n>=0;n--)if(/^\s$/.test(e.charAt(n))){o+=[e.slice(0,n),s].join(""),e=e.slice(n+1),i=!0;break}i||(o+=[e.slice(0,t),s].join(""),e=e.slice(t)),e.length<t&&(a=!0)}while(!a);return o+e}},{key:"createEntity",value:function(e){var t="enemies"===e.type.group?this.enemies:this.friends,s=t.create(+e.x,+e.y,e.type.texture);s.health=s.maxHealth=100,s.bringToTop(),s.data.update=this.updateFunc(e.type.group),s.data.parent=s,s.renderable=!0}},{key:"updateFunc",value:function(e){var t=this,s=this.game;switch(e){case"enemies":return function(){this.parent.body.velocity=s.physics.arcade.velocityFromRotation(s.physics.arcade.angleBetween(this.parent,t.player),100)}}}},{key:"render",value:function(){this.enemies.children[0]&&this.game.debug.body(this.enemies.children[0])}}]),t}(Phaser.State);s.default=u},{"../rooms.js":2}],6:[function(e,t,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),r=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),n(t,[{key:"create",value:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"Gameover",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.saveVarsToLocalStorage(),this.input.onDown.add(this.restartGame,this)}},{key:"saveVarsToLocalStorage",value:function(){}},{key:"resetGlobalVariables",value:function(){}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.resetGlobalVariables(),this.game.state.start("menu")}}]),t}(Phaser.State);s.default=r},{}],7:[function(e,t,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),r=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),n(t,[{key:"create",value:function(){this.add.text(.5*this.game.width,.25*this.game.height,"Infringe",{font:"42px Arial",fill:"#ffffff",align:"center"}).anchor.set(.5),this.add.button(.5*this.game.width,.5*this.game.height,"play",this.startGame,this).anchor.set(.5),this.game.global.songManager.play("intro")}},{key:"update",value:function(){}},{key:"startGame",value:function(){this.game.state.start("game")}}]),t}(Phaser.State);s.default=r},{}],8:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=e("../rooms.js"),w=a(l),u=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return n(t,e),r(t,[{key:"preload",value:function(){var e=this;this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset);var t=this.add.text(.5*this.game.width,.25*this.game.height,"Loading Resources...    0/0 Assets Loaded (0%)",{fill:"#FFFFFF"});t.anchor.setTo(.5);var s=function(){t.setText("Loading Resources...    "+e.load.totalLoadedFiles()+"/"+(e.load.totalLoadedFiles()+e.load.totalQueuedFiles())+" Assets Loaded ("+e.load.progress+"%)")};this.load.onFileStart.add(s),this.load.onFileComplete.add(s),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"update",value:function(){this.ready&&this.game.state.start("menu")}},{key:"loadResources",value:function(){this.game.load.baseURL=window.location,this.game.load.path="assets/",this.game.load.image("bullet","bullett orange.png"),this.game.load.images(["play","Pause","person","pwrblt","snow","Zombie"]),this.game.load.images(this.generateImages()),this.game.load.spritesheet("missile",null,63,22.25,4),this.game.load.spritesheet("portal",null,32,32),this.game.load.audio("intro","NewStuff.wav"),Object.keys(w.default.rooms).filter(function(e){return"default"!==e}).forEach(function(e){this.game.load.audio(w.default.rooms[e].music.replace(".wav",""),w.default.rooms[e].music)},this)}},{key:"onLoadComplete",value:function(){console.log("Load complete!"),this.ready=!0}},{key:"generateImages",value:function(){var e=[];return Object.keys(w.default.rooms).filter(function(e){return"default"!==e}).map(function(e){return w.default.rooms[e]}).map(function(e){return Object.keys(e.textureMap).map(function(t){return e.textureMap[t]}).filter(function(e){return"portal"!==e})}).forEach(function(t){t.forEach(function(t){e.push(t)})}),e}}]),t}(Phaser.State);s.default=u},{"../rooms.js":2}]},{},[1]);

!function e(t,a,o){function r(i,s){if(!a[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(n)return n(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return r(a?a:e)},c,c.exports,e,t,a,o)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=e("./states/boot"),n=o(r),i=e("./states/game"),s=o(i),u=e("./states/gameover"),l=o(u),c=e("./states/menu"),f=o(c),h=e("./states/preloader"),p=o(h),d=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"infringe.js-game");d.state.add("boot",new n.default),d.state.add("game",new s.default),d.state.add("gameover",new l.default),d.state.add("menu",new f.default),d.state.add("preloader",new p.default),d.state.start("boot")},{"./states/boot":4,"./states/game":5,"./states/gameover":6,"./states/menu":7,"./states/preloader":8}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o={};o.default={map:["aabs","saba"],mapParsed:[],entitys:["0,0,texture1","10,10,texture2"],textureMap:{a:"texture3",b:"texture4",s:"texture0"},music:"room.music",next:"next room"},o.Bed={map:["wwwwwwwwww","ccccccwwww","cbtllwwwwp","ccccccwwww","wwwwwwwwww"],mapParsed:[],textureMap:{t:"bed_head_top",b:"bed_feet_top",c:"wool_colored_cyan",l:"brick",p:"portal",w:"planks_big_oak"},music:"Dumdum.wav",next:"Lab"},o.Lab={map:[],mapParsed:[],textureMap:{},music:"Lab Room.wav",next:"Test"};var r=function(e){if(!e.mapParsed.length)for(var t in e.map){e.mapParsed[t]=[];for(var a in e.map[t])e.mapParsed[t].push(e.textureMap[e.map[t][a]])}return e.mapParsed},n={parse:r,rooms:o};a.default=n},{}],3:[function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=function(){function e(t){o(this,e),this.game=t,this._cursong=null}return r(e,[{key:"play",value:function(e){this._cursong&&(this._cursong.stop(),this._cursong.destroy()),this._cursong=this.game.add.audio(e),this._cursong.play(null,null,null,!0,!0),this._cursong.mute=!1,this._cursong.volume=1}}]),e}();a.default=n},{}],4:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),u=e("../songs.js"),l=o(u),c=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),s(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={room:"Bed",songManager:new l.default(this.game)}}}]),t}(Phaser.State);a.default=c},{"../songs.js":3}],5:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),u=e("../rooms.js"),l=o(u),c=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),s(t,[{key:"create",value:function(){this.walls=this.add.group(null,"walls",!1,!0,Phaser.Physics.ARCADE),this.renderRoom();var e=this.player=this.game.global.player=this.add.sprite(0,0,"person");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5,.5),e.body.collideWorldBounds=!0,e.poweredUp=!1,e.x=e.width/2,e.y=e.height/2,this.add.button(this.game.width-40,10,"Pause",this.pauseGame,this),this.keys=this.game.input.keyboard.addKeys({up:Phaser.KeyCode.W,down:Phaser.KeyCode.S,left:Phaser.KeyCode.A,right:Phaser.KeyCode.D,firemissle:Phaser.KeyCode.SPACEBAR});var t=this.add.weapon(10,"bullet");t.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,t.bulletSpeed=600,t.fireRate=1,t.trackSprite(e,0,0,!0),this.game.input.onDown.add(function(){e.poweredUp||t.fire()}),this.enemies=this.add.group(null,"enemies",!1,!0,Phaser.Physics.ARCADE)}},{key:"update",value:function(){this.player.rotation=this.game.physics.arcade.angleToPointer(this.player),this.keys.up.isDown?this.player.body.velocity.y=-143:this.keys.down.isDown?this.player.body.velocity.y=143:this.player.body.velocity.y=0,this.keys.left.isDown?this.player.body.velocity.x=-143:this.keys.right.isDown?this.player.body.velocity.x=143:this.player.body.velocity.x=0,this.keys.firemissle.isDown&&this.fireMissle(),this.game.physics.arcade.intersects(this.player.body,this.portal.body)&&this.advance()}},{key:"pauseGame",value:function(){this.game.paused=!0}},{key:"fireMissle",value:function(){if(!this.missle){var e=this.add.sprite(this.player.x,this.player.y,"missile");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5),e.rotation=this.player.rotation,this.game.physics.arcade.velocityFromRotation(e.rotation,300,e.body.velocity),e.animations.add("go"),e.animations.play("go",10,!0),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,this.missle=!0,e.events.onKilled.add(function(){this.missle=!1},this)}}},{key:"createPortal",value:function(e,t){var a=this.portal=this.add.sprite(e,t,"portal");this.game.physics.enable(a,Phaser.Physics.ARCADE),a.animations.add("default"),a.animations.play("default",15,!0)}},{key:"endGame",value:function(){this.game.state.start("gameover")}},{key:"paused",value:function(){this.pausedText=this.add.text(.5*this.game.width,.25*this.game.height,"Paused"),this.pausedText.anchor.set(.5),this.game.input.onDown.addOnce(this.resumeGame,this)}},{key:"resumed",value:function(){this.pausedText.destroy()}},{key:"resumeGame",value:function(){this.game.paused=!1}},{key:"renderRoom",value:function(){var e,t,a;for(a=this.room=l.default.rooms[this.game.global.room],l.default.parse(a),document.title=this.game.global.room+" Room - Infringe",this.game.global.songManager.play(a.music.replace(".wav","")),t=0;t<a.mapParsed.length;t++)for(e=0;e<a.mapParsed[t].length;e++)"portal"===a.mapParsed[t][e]?this.createPortal(32*e,32*t):this.add.image(32*e,32*t,a.mapParsed[t][e]);this.game.world.setBounds(0,0,32*e,32*t)}},{key:"advance",value:function(){player.x=player.width/2,player.y=player.height/2,this.game.global.room=this.room.next,this.renderRoom()}}]),t}(Phaser.State);a.default=c},{"../rooms.js":2}],6:[function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),i(t,[{key:"create",value:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"Gameover",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.saveVarsToLocalStorage(),this.input.onDown.add(this.restartGame,this)}},{key:"saveVarsToLocalStorage",value:function(){}},{key:"resetGlobalVariables",value:function(){}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.resetGlobalVariables(),this.game.state.start("menu")}}]),t}(Phaser.State);a.default=s},{}],7:[function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),i(t,[{key:"create",value:function(){this.add.text(.5*this.game.width,.25*this.game.height,"Infringe",{font:"42px Arial",fill:"#ffffff",align:"center"}).anchor.set(.5),this.add.button(.5*this.game.width,.5*this.game.height,"play",this.startGame,this).anchor.set(.5),this.game.global.songManager.play("intro")}},{key:"update",value:function(){}},{key:"startGame",value:function(){this.game.state.start("game")}}]),t}(Phaser.State);a.default=s},{}],8:[function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),u=e("../rooms.js"),l=o(u),c=function(e){function t(){r(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return i(t,e),s(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"update",value:function(){this.ready&&this.game.state.start("menu")}},{key:"loadResources",value:function(){this.game.load.baseURL=window.location,this.game.load.path="assets/",this.game.load.image("bullet","bullett orange.png"),this.game.load.images(["play","Pause","person","pwrblt","snow"]),this.game.load.images(this.generateImages()),this.game.load.spritesheet("missile",null,63,22.25,4),this.game.load.spritesheet("portal",null,32,32),this.game.load.audio("intro","NewStuff.wav"),Object.keys(l.default.rooms).filter(function(e){return"default"!==e}).forEach(function(e){console.log(l.default.rooms[e].music.replace(".wav","")),this.game.load.audio(l.default.rooms[e].music.replace(".wav",""),l.default.rooms[e].music)},this)}},{key:"onLoadComplete",value:function(){console.log("Load complete!"),this.ready=!0}},{key:"generateImages",value:function(){var e=[];return Object.keys(l.default.rooms).filter(function(e){return"default"!==e}).map(function(e){return l.default.rooms[e]}).map(function(e){return Object.keys(e.textureMap).map(function(t){return e.textureMap[t]}).filter(function(e){return"portal"!==e})}).forEach(function(t){t.forEach(function(t){e.push(t)})}),e}}]),t}(Phaser.State);a.default=c},{"../rooms.js":2}]},{},[1]);

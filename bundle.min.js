!function e(t,s,a){function o(i,n){if(!s[i]){if(!t[i]){var l="function"==typeof require&&require;if(!n&&l)return l(i,!0);if(r)return r(i,!0);var w=new Error("Cannot find module '"+i+"'");throw w.code="MODULE_NOT_FOUND",w}var u=s[i]={exports:{}};t[i][0].call(u.exports,function(e){var s=t[i][1][e];return o(s?s:e)},u,u.exports,e,t,s,a)}return s[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),r=a(o),i=e("./states/game"),n=a(i),l=e("./states/gameover"),w=a(l),u=e("./states/menu"),c=a(u),h=e("./states/preloader"),d=a(h),f=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.AUTO,"infringe.js-game");f.state.add("boot",new r.default),f.state.add("game",new n.default),f.state.add("gameover",new w.default),f.state.add("menu",new c.default),f.state.add("preloader",new d.default),f.state.start("boot")},{"./states/boot":4,"./states/game":5,"./states/gameover":6,"./states/menu":7,"./states/preloader":8}],2:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={};a.default={map:["aabs","saba"],mapParsed:[],entitys:["0,0,texture1","10,10,texture2"],textureMap:{a:"texture3",b:"texture4",s:"texture0"},music:"room.music",next:"next room"},a.Bed={map:["wwwwwwwwww","ccccccwwww","cbtllwwwwp","ccccccwwww","wwwwwwwwww"],mapParsed:[],textureMap:{t:"bed_head_top",b:"bed_feet_top",c:"wool_colored_cyan",l:"brick",p:"portal",w:"planks_big_oak"},music:"Dumdum.wav",next:"Lab",text:"You are the brilliant Dr. Syphla. You have been ordered to test the new wormhole device. You were also told to be ready for anything, hence the gun."},a.Lab={map:["wwwwwwwwwwwwwwwwww                          wwwwwwwwwwwwwwwwwwwwwwww","wwwwwwwwwwwwwwwwww                          wwwwwwwwwwwdwwwwwwwwwww","wwwwwwwcccwwwwwwww                          wwwwwwwwwggdggwwwwwwwwww","wwwwwwwc cwwwwwwww                          wwwwwwwwwgeeegwwwwwwwwww","wwwwwwwcccwwwwwwww                          wwwwwwwwddebedddwwwwwwww","wwwwwwwwwwwwwwwwww                          wwwwwwwwwgeeegwwwwwwwwww","                ww                          wwwwwwwwwggdggwwwwwwwwww","                wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwdwwwwwwwwwwww","                wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww"],mapParsed:[],textureMap:{w:"planks_big_oak",c:"wool_colored_cyan",p:"portal",i:"cauldron_inner",b:"activate",d:"diamond_block",g:"gold_block",e:"emerald_block"},music:"Lab Room.wav",next:"Outside",walls:["8,3"],text:"This is your lab, where you make the most important discoveries. Go through the hallway to test it out.",onButtonPress:function(){this.advance()}},a.Outside={map:["ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss","ssssssssssssssssssssss"],mapParsed:[],textureMap:{s:"snow"},music:"",next:"?",text:"Wha? What should have been a controlled experiment somehow got you in the middle of a barren tundra, even though you live in florida"};var o=function(e){if(!e.mapParsed.length)for(var t in e.map){e.mapParsed[t]=[];for(var s in e.map[t])e.mapParsed[t].push(e.textureMap[e.map[t][s]])}return e.mapParsed},r={parse:o,rooms:a};s.default=r},{}],3:[function(e,t,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.game=t,this._cursong=null}return o(e,[{key:"play",value:function(e){this._cursong&&(this._cursong.stop(),this._cursong.destroy()),this._cursong=this.game.add.audio(e),this._cursong.play(null,null,null,!0,!0),this._cursong.mute=!1,this._cursong.volume=1}}]),e}();s.default=r},{}],4:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=e("../songs.js"),w=a(l),u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),n(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={room:"Bed",songManager:new w.default(this.game)}}}]),t}(Phaser.State);s.default=u},{"../songs.js":3}],5:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=e("../rooms.js"),w=a(l),u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),n(t,[{key:"create",value:function(){this.walls=this.add.group(null,"walls",!1,!0,Phaser.Physics.ARCADE),this.imgs=[],this.renderRoom();var e=this.player=this.game.global.player=this.add.sprite(0,0,"person");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5,.5),e.body.collideWorldBounds=!0,e.data.poweredUp=!1,this.add.button(this.game.width-40,10,"Pause",this.pauseGame,this),this.keys=this.game.input.keyboard.addKeys({up:Phaser.KeyCode.W,down:Phaser.KeyCode.S,left:Phaser.KeyCode.A,right:Phaser.KeyCode.D,firemissle:Phaser.KeyCode.SPACEBAR});var t=this.add.weapon(10,"bullet");t.bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS,t.bulletSpeed=600,t.fireRate=1,t.trackSprite(e,0,0,!0),this.weapon=t,this.game.input.onDown.add(function(){e.data.poweredUp||t.fire()}),this.enemies=this.add.group(null,"enemies",!1,!0,Phaser.Physics.ARCADE),this.game.camera.follow(e)}},{key:"update",value:function(){this.player.rotation=this.game.physics.arcade.angleToPointer(this.player),this.keys.up.isDown?this.player.body.velocity.y=-143:this.keys.down.isDown?this.player.body.velocity.y=143:this.player.body.velocity.y=0,this.keys.left.isDown?this.player.body.velocity.x=-143:this.keys.right.isDown?this.player.body.velocity.x=143:this.player.body.velocity.x=0,this.keys.firemissle.isDown&&this.fireMissle(),this.portal.body&&this.game.physics.arcade.intersects(this.player.body,this.portal.body)&&this.advance(),this.game.physics.arcade.collide(this.player,this.walls),this.game.physics.arcade.collide(this.walls,this.missile,function(e){console.log("Collide!"),e.kill()}),this.game.physics.arcade.collide(this.weapon,this.walls,function(e){e.kill()}),this.player.bringToTop()}},{key:"pauseGame",value:function(){this.game.paused=!0}},{key:"fireMissle",value:function(){if(!this.missle){var e=this.add.sprite(this.player.x,this.player.y,"missile");this.game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.setTo(.5),e.rotation=this.player.rotation,this.game.physics.arcade.velocityFromRotation(e.rotation,300,e.body.velocity),e.animations.add("go"),e.animations.play("go",10,!0),e.checkWorldBounds=!0,e.outOfBoundsKill=!0,this.missle=e,e.events.onKilled.add(function(){this.missle=!1},this)}}},{key:"createPortal",value:function(e,t){var s=this.portal=this.add.sprite(e,t,"portal");return this.game.physics.enable(s,Phaser.Physics.ARCADE),s.animations.add("default"),s.animations.play("default",15,!0),s}},{key:"endGame",value:function(){this.game.state.start("gameover")}},{key:"paused",value:function(){this.pausedText=this.add.text(.5*this.game.width,.25*this.game.height,"Paused"),this.pausedText.anchor.set(.5),this.game.input.onDown.addOnce(this.resumeGame,this)}},{key:"resumed",value:function(){this.pausedText.destroy()}},{key:"resumeGame",value:function(){this.game.paused=!1}},{key:"renderRoom",value:function(){var e,t,s;for(this.imgs.text&&(this.imgs.text.kill(),this.imgs.text.destroy()),this.imgs.length&&(this.imgs.forEach(function(e){e.destroy()}),this.imgs=[]),this.walls.children.forEach(function(e){e.destroy()}),s=this.room=w.default.rooms[this.game.global.room],w.default.parse(s),document.title=this.game.global.room+" Room - Infringe",this.game.global.songManager.play(s.music.replace(".wav","")),t=0;t<s.mapParsed.length;t++)for(e=0;e<s.mapParsed[t].length;e++)"portal"===s.mapParsed[t][e]?this.imgs.push(this.createPortal(32*e,32*t)):void 0===s.mapParsed[t][e]?this.createWall(32*e,32*t):"activate"===s.mapParsed[t][e]?this.imgs.push(this.add.button(32*e,32*t,"activate",s.onButtonPress,this)):this.imgs.push(this.add.image(32*e,32*t,s.mapParsed[t][e])),this.imgs[this.imgs.length-1].sendToBack();if(s.walls)for(var a=0;a<s.walls.length;a++)this.createWall(32*+s.walls[a].split(",")[0],32*+s.walls[a].split(",")[1]);this.imgs.text=this.add.text(32,32*t+64,this.wordWrap(s.text,50),{fill:"#FFFFFF",fontSize:"20px"}),this.game.world.setBounds(0,0,32*e,32*t)}},{key:"advance",value:function(){this.player.x=0,this.player.y=0,this.game.global.room=this.room.next,this.renderRoom()}},{key:"createWall",value:function(e,t){var s=this.walls.create(e,t,"wool_colored_cyan");s.body.immovable=!0,s.collideWorldBounds=!0,s.allowGravity=!1,s.bringToTop(),s.z=this.player.z}},{key:"wordWrap",value:function(e,t){var s="\n",a=!1,o="";do{for(var r=!1,i=t-1;i>=0;i--)if(/^\s$/.test(e.charAt(i))){o+=[e.slice(0,i),s].join(""),e=e.slice(i+1),r=!0;break}r||(o+=[e.slice(0,t),s].join(""),e=e.slice(t)),e.length<t&&(a=!0)}while(!a);return o+e}}]),t}(Phaser.State);s.default=u},{"../rooms.js":2}],6:[function(e,t,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),n=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),i(t,[{key:"create",value:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"Gameover",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.saveVarsToLocalStorage(),this.input.onDown.add(this.restartGame,this)}},{key:"saveVarsToLocalStorage",value:function(){}},{key:"resetGlobalVariables",value:function(){}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.resetGlobalVariables(),this.game.state.start("menu")}}]),t}(Phaser.State);s.default=n},{}],7:[function(e,t,s){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),n=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),i(t,[{key:"create",value:function(){this.add.text(.5*this.game.width,.25*this.game.height,"Infringe",{font:"42px Arial",fill:"#ffffff",align:"center"}).anchor.set(.5),this.add.button(.5*this.game.width,.5*this.game.height,"play",this.startGame,this).anchor.set(.5),this.game.global.songManager.play("intro")}},{key:"update",value:function(){}},{key:"startGame",value:function(){this.game.state.start("game")}}]),t}(Phaser.State);s.default=n},{}],8:[function(e,t,s){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),l=e("../rooms.js"),w=a(l),u=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return i(t,e),n(t,[{key:"preload",value:function(){var e=this;this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset);var t=this.add.text(.5*this.game.width,.25*this.game.height,"Loading Resources...    0/0 Assets Loaded (0%)",{fill:"#FFFFFF"});t.anchor.setTo(.5);var s=function(){t.setText("Loading Resources...    "+e.load.totalLoadedFiles()+"/"+(e.load.totalLoadedFiles()+e.load.totalQueuedFiles())+" Assets Loaded ("+e.load.progress+"%)")};this.load.onFileStart.add(s),this.load.onFileComplete.add(s),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"update",value:function(){this.ready&&this.game.state.start("menu")}},{key:"loadResources",value:function(){this.game.load.baseURL=window.location,this.game.load.path="assets/",this.game.load.image("bullet","bullett orange.png"),this.game.load.images(["play","Pause","person","pwrblt","snow"]),this.game.load.images(this.generateImages()),this.game.load.spritesheet("missile",null,63,22.25,4),this.game.load.spritesheet("portal",null,32,32),this.game.load.audio("intro","NewStuff.wav"),Object.keys(w.default.rooms).filter(function(e){return"default"!==e}).forEach(function(e){this.game.load.audio(w.default.rooms[e].music.replace(".wav",""),w.default.rooms[e].music)},this)}},{key:"onLoadComplete",value:function(){console.log("Load complete!"),this.ready=!0}},{key:"generateImages",value:function(){var e=[];return Object.keys(w.default.rooms).filter(function(e){return"default"!==e}).map(function(e){return w.default.rooms[e]}).map(function(e){return Object.keys(e.textureMap).map(function(t){return e.textureMap[t]}).filter(function(e){return"portal"!==e})}).forEach(function(t){t.forEach(function(t){e.push(t)})}),e}}]),t}(Phaser.State);s.default=u},{"../rooms.js":2}]},{},[1]);
